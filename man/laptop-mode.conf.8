.TH "LAPTOP-MODE.CONF" "8" 
.SH "NAME" 
laptop-mode.conf \- Configuration file for the laptop-mode-tools and the  
\fBlaptop_mode\fR control script. 
.SH "DESCRIPTION" 
.PP 
This manual page documents the options that can be set in the laptop-mode.conf configuration file. 
For a description of what laptop mode does, see the laptop_mode(8) manpage.

.SH "SETTINGS" 
.PP 
The syntax of options is OPTION=value. There are some groups of options that specify values depending
on power state and laptop mode is enabled. These use the prefix "LM_" to indicate that a value is
used only when laptop mode is enabled, "NOLM_" to indicate the opposite, "AC_" to indicate that a value
is used only when the system is running on AC power, and "BATT_" to indicate that a value is used
only when the system is running on batteries. Settings are prefixed with a combination of an optional
LM_/NOLM_ prefix and an optional AC_/BATT_. For instance, the combination LM_AC_ means "when the system
is in laptop mode and on AC power". (Note that this situation happens only if ENABLE_LAPTOP_MODE_ALWAYS is
enabled!) If one of the prefixes (either LM_/NOLM_ or AC_/BATT_)
is missing, then the value is used independently of the state of laptop mode or AC power,
respectively. Options that start with "CONTROL_" are boolean settings that determine whether laptop
mode tools is allowed to control a certain aspect of your system. Boolean settings always expect "0"
to indicate the false (negative/no/disabled) value, and "1" to indicate the true (positive/yes/enabled)
value.

.PP
The following settings are available in laptop-mode.conf: 

.IP "\fBVERBOSE_OUTPUT\fP" 10
Set this to 1 if you want to see a lot of output when you start/stop laptop mode, and to 0 if you
don't want this. Useful for debugging purposes.

.IP "\fBENABLE_LAPTOP_MODE_ON_BATTERY\fP" 10 
.IP "\fBENABLE_LAPTOP_MODE_ON_AC\fP" 10 
These options determine whether laptop mode will be activated when the
computer is on battery or on AC power, respectively. Note that if the
system service laptop-mode is not started, then laptop mode will never
be started, even if this option is enabled. 
 
.IP "\fBENABLE_LAPTOP_MODE_WHEN_LID_CLOSED\fP" 10 
When this option is enabled, laptop mode will be activated when the laptop's lid is 
closed, even if the system is not working on batteries. Note that if the system service laptop-mode 
is not started, then laptop mode will never be started, even if this option is enabled. 
This feature is only supported on ACPI. 
 
.IP "\fBMINIMUM_BATTERY_CHARGE_PERCENT\fP" 10 
The minimum number of battery minutes, charge (in mAh) or charge (in mWh)
that you want to have available while your laptop is in 
laptop mode. When the number of minutes/mAhs/mWhs goes below this value,
the data loss sensitive features are automatically disabled. Note that some
batteries do not report a discharge rate, which means that
MINIMUM_BATTERY_MINUTES has no effect for these batteries. These options are
only supported on ACPI.

.IP "\fBDISABLE_LAPTOP_MODE_ON_CRITICAL_BATTERY_LEVEL\fP" 10 
If this option is enabled, the data loss sensitive features of laptop mode are
disabled when the battery reports its state as "critical". This option is only
supported on ACPI.

.IP "\fBHD\fP" 10 
The hard drives which laptop mode should operate upon. If you have multiple
hard drives, you should list them all in this option, separated by spaces, for
example: "/dev/hda /dev/hdb".

.IP "\fBPARTITIONS\fP" 10 
This option specifies the partitions or mount points that laptop mode should
operate upon. Separate the partitions or mount points by spaces. You can
include the entry "auto" to stand for the partitions on the hard drives
specified in the HD option.
 
.IP "\fBASSUME_SCSI_IS_SATA\fP" 10
This option, enabled by default, tells laptop mode tools to assume that a
device /dev/sdX is a SATA device, and that it should be controlled using
hdparm. If your /dev/sdX drives are really SCSI drives, disable this option.

.IP "\fBLM_BATT_MAX_LOST_WORK_SECONDS\fP" 10 
.IP "\fBLM_AC_MAX_LOST_WORK_SECONDS\fP" 10 
The maximum number of seconds worth of data that you can lose when power runs out or when the
computer crashes. This is the maximum number of seconds that laptop mode will keep modified data
in memory without being written to disk. (Note that the NOLM value is missing: modifying
this value when laptop mode is disabled is extremely useless, as it won't save you any power, and
will only lose you work.)
 
.IP "\fBCONTROL_READAHEAD\fP" 10 
When this option is enabled, laptop mode tools controls the readahead on the filesystems
it works upon.

.IP "\fBLM_READAHEAD\fP" 10 
.IP "\fBNOLM_READAHEAD\fP" 10 
The number of kilobytes to "read ahead" on your hard disks. Reading ahead means that 
whenever some data is read from disk, the data which is most likely to be accessed next is  
read as well, ahead of time. This then saves a hard disk spinup when the data is actually 
needed, because the data is then already in memory. Don't set this value too
high, because the readahead applies to all files that are read!

.IP "\fBCONTROL_NOATIME\fP" 10 
When this option is enabled, laptop mode tools places the "noatime" option in the mount options
of your filesystems when laptop mode is active. This option has the effect of disabling 
access time logging on files, which may save some disk activity. If you use programs that depend
on access times (e.g., mutt), then you should disable this option. 

.IP "\fBCONTROL_HD_IDLE_TIMEOUT\fP" 10 
When this option is enabled, laptop mode tools adjusts your hard drives' idle timeouts, i.e.,
the time of inactivity before they spin down.

.IP "\fBLM_AC_HD_IDLE_TIMEOUT_SECONDS\fP" 10 
.IP "\fBLM_BATT_HD_IDLE_TIMEOUT_SECONDS\fP" 10 
.IP "\fBNOLM_HD_IDLE_TIMEOUT_SECONDS\fP" 10 
These settings control the idle timeout for your hard drives. The values are specified in seconds.
Values up to 20 minutes can be represented accurately by the hardware, anything above that is
rounded down to half-hour precision. Use the value 0 to disable idle timeout.

.IP "\fBCONTROL_HD_POWERMGMT\fP" 10 
When this option is enabled, laptop mode tools adjusts your hard drives' power management settings.

.IP "\fBBATT_HD_POWERMGMT\fP" 10 
.IP "\fBLM_AC_HD_POWERMGMT\fP" 10 
.IP "\fBNOLM_AC_HD_POWERMGMT\fP" 10 
These values specify the power management level for your hard drives.
The legal values for these options can be found in the hdparm(8) manual page, 
in the documentation of the \fB-B\fP option.

.IP "\fBCONTROL_HD_WRITECACHE\fP" 10
When this option is enabled, laptop mode tools controls your hard drives' write cache settings.

.IP "\fBNOLM_AC_HD_WRITECACHE\fP" 10
.IP "\fBNOLM_BATT_HD_WRITECACHE\fP" 10
.IP "\fBLM_HD_WRITECACHE\fP" 10
These options specify whether the write caches should be enabled for your hard drives.

.IP "\fBACPI_WITHOUT_AC_EVENTS\fP" 10 
Enable this option if you have a laptop with a buggy ACPI implementation 
that doesn't send out AC adapter events. Enabling this option will 
make laptop mode check the AC adapter state whenever the battery 
state changes, which achieves just about the same effect as responding 
to AC adapter events.

.IP "\fBCONTROL_CPU_FREQUENCY\fP" 10 
When this option is enabled, laptop mode tools controls your CPU's frequency
scaling bounds and the scaling governor. This option is currently only supported
on 2.6 kernels. 
 
.IP "\fBBATT_CPU_MAXFREQ\fP" 10
.IP "\fBBATT_CPU_INFREQ\fP" 10
.IP "\fBBATT_CPU_GOVERNOR\fP" 10
.IP "\fBBATT_CPU_IGNORE_NICE_LOAD\fP" 10
.IP "\fBLM_AC_CPU_MAXFREQ\fP" 10
.IP "\fBLM_AC_CPU_MINFREQ\fP" 10
.IP "\fBLM_AC_CPU_GOVERNOR\fP" 10
.IP "\fBLM_AC_CPU_IGNORE_NICE_LOAD\fP" 10
.IP "\fBNOLM_AC_CPU_MAXFREQ\fP" 10
.IP "\fBNOLM_AC_CPU_MINFREQ\fP" 10
.IP "\fBNOLM_AC_CPU_GOVERNOR\fP" 10
.IP "\fBNOLM_AC_CPU_IGNORE_NICE_LOAD\fP" 10
These options specify the CPU frequency bounds and scaling governor in the
various power states. You can change the MAXFREQ and MINFREQ values to any
value listed in
/sys/devices/system/cpu/cpu0/cpufreq/scaling_available_frequencies. In
addition, you can use "fastest" and "slowest". The GOVERNOR option controls
the setting for /sys/devices/system/cpu/cpufreq/scaling_governor. The
available options are dependent on the installed kernel. The most
common ones are "conservative", "performance" and "ondemand". The IGNORE_NICE_LOAD
option controls a setting that is available for the "conservative" and "ondemand"
governors. Set this option to 1 if you want the frequency scaling governor to
not increase the CPU frequency for the sake of low-priority ("nice") background
processes.

.IP "\fBCONTROL_CPU_THROTTLING\fP" 10 
When this option is enabled, laptop mode tools controls your CPU's throttling level.
It is only useful if your CPU doesn't support frequency scaling.
This option is only supported on some ACPI hardware.
 
.IP "\fBBATT_CPU_THROTTLING\fP" 10
.IP "\fBLM_AC_CPU_THROTTLING\fP" 10
.IP "\fBNOLM_AC_CPU_THROTTLING\fP" 10
These options specify the throttling level for the CPU in the various power states.
You can change it to any level listed in /proc/acpi/processor/CPU0/throttling (use only
the number!). In addition, you can use "maximum" (which is the slowest option), "minimum"
(full speed) and "medium" (about halfway).

.IP "\fBCONTROL_SYSLOG_CONF\fP" 10 
.IP "\fBLM_AC_SYSLOG_CONF\fP" 10 
.IP "\fBNOLM_AC_SYSLOG_CONF\fP" 10 
.IP "\fBBATT_SYSLOG_CONF\fP" 10 
.IP "\fBSYSLOG_CONF_SIGNAL_PROGRAM\fP" 10 
.IP "\fBSYSLOG_CONF\fP" 10 
When this option is enabled, laptop mode tools controls /etc/syslog.conf as a
symlink. This option is deprecated. Use the configuration-file-control module
instead, which is configured in the
.B /etc/laptop-mode/conf.d/configuration-file-control.conf
module configuration file.

.IP "\fBCONTROL_DPMS_STANDBY\fP" 10
When this option is enabled, laptop mode will control the DPMS
standby timeout for all X displays on the machine that users have logged on to.
In short, this allows laptop mode to control the time after which your screen
is blanked.

There is one limitation to this feature: the settings are not automatically
applied to new X logons. This can be fixed by configuring the display
manager. For the gdm display manager, configure a PostLogin directory
(usually /etc/gdm/PostLogin or /etc/X11/gdm/PostLogin), and in that directory
create a shell script called Default. In that file, include the command:

.IP "  ( sleep 60 ; /usr/sbin/laptop_mode force ) &"

Similar configurations are possible for other window managers. Please consult
your window manager documentation for more information.

.IP "\fBBATT_DPMS_STANDBY\fP" 10
.IP "\fBLM_AC_DPMS_STANDBY\fP" 10
.IP "\fBNOLM_AC_DPMS_STANDBY\fP" 10
These options specify the display standby timeouts for the X displays, in
seconds.

.IP "\fBCONTROL_TERMINAL\fP" 10
When this option is enabled, laptop mode will control the terminal blanking
settings for Linux's virtual consoles.

.IP "\fBTERMINALS\fP" 10
This option should contain a space-separated list of console device files that
should be affected by the terminal blanking settings. Only
one console device file needs to be included, because the settings are shared
between all virtual consoles. By default this setting is set to /dev/tty1.

.IP "\fBBATT_TERMINAL_BLANK_MINUTES\fP" 10
.IP "\fBLM_AC_TERMINAL_BLANK_MINUTES\fP" 10
.IP "\fBNOLM_AC_TERMINAL_BLANK_MINUTES\fP" 10
.IP "\fBBATT_TERMINAL_POWERDOWN_MINUTES\fP" 10
.IP "\fBLM_AC_TERMINAL_POWERDOWN_MINUTES\fP" 10
.IP "\fBNOLM_AC_TERMINAL_POWERDOWN_MINUTES\fP" 10
These options specify the terminal blanking and powerdown timeouts, in
minutes. The allowed ranges are 1-60 minutes, or 0 to disable blanking
or powerdown. The values are cumulative: the powerdown value is counted
from the moment of screen blanking, not from the start of inactivity.

.IP "\fBCONTROL_BRIGHTNESS\fP" 10
When this option is enabled, laptop mode will adjust your LCD screen's
brightness settings, if possible. You must configure the following settings
for this to work.

.IP "\fBBATT_BRIGHTNESS_COMMAND\fP" 10
.IP "\fBLM_AC_BRIGHTNESS_COMMAND\fP" 10
.IP "\fBNOLM_AC_BRIGHTNESS_COMMAND\fP" 10
.IP "\fBBRIGHTNESS_OUTPUT\fP" 10
The BRIGHTNESS_COMMAND settings specify commands that should be executed
in order to set the brightness of your LCD. The BRIGHTNESS_OUTPUT setting
specifies where the output of the command will be written. For instance,
if your LCD's brightness is adjusted by writing a numeric value 3 to a file
called /proc/brightness, you should set the command to "echo 3" and the
output file to "/proc/brightness". If your LCD's brightness is adjusted
using a utility like "toshset", you should include the entire toshset
command line as the command, and set the output file to "/dev/null".


.IP "\fBENABLE_AUTO_HIBERNATION\fP" 10
When this option is enabled, laptop mode will automatically hibernate your
computer when the battery level reaches a certain configurable threshold. This
feature is only available when ACPI is enabled.

.IP "\fBHIBERNATE_COMMAND\fP" 10
This option specifies the command that laptop mode should execute when
auto-hibernation is triggered. Normally, this is set to something like
"/usr/sbin/hibernate".

.IP "\fBAUTO_HIBERNATION_BATTERY_CHARGE_PERCENT\fP" 10
The battery level threshold for auto-hibernation, as a percentage of total
battery capacity.

.IP "\fBAUTO_HIBERNATION_ON_CRITICAL_BATTERY_LEVEL\fP" 10
When this option is enabled, auto-hibernation will kick in when the battery
reports its state as "critical".

.IP "\fBCONTROL_START_STOP\fP" 10
If this option is enabled, laptop mode tools will automatically start and stop
daemons or other programs for you. The actual configuration of which daemons
are to be stopped/started is done by placing links to the daemons' init scripts
in the following directories:
.IP "       /etc/laptop-mode/batt-start"
.IP "       /etc/laptop-mode/batt-stop"
.IP "       /etc/laptop-mode/lm-ac-start"
.IP "       /etc/laptop-mode/lm-ac-stop"
.IP "       /etc/laptop-mode/nolm-ac-start"
.IP "       /etc/laptop-mode/nolm-ac-stop"
As you have probably guessed, the directories of the form "X-stop-daemons"
should contain init scripts of daemons that you want stopped in mode X, while
the directories of the form "X-start-daemons" should contain init scripts of
daemons that you want started in mode X. Of course, it is possible to put in
your own handling of modes as well: the only requirement on the scripts in the
directories is that they handle the "start" and "stop" commands, like init
scripts usually do.

The ordering of the script handling is as follows. When a mode is entered, the
actions of the previous mode are undone, in reverse order. This means that if
the previous mode had done "daemon1 stop", "daemon2 stop" and "daemon3 start",
then the undoing actions will be "daemon3 stop", "daemon2 start", "daemon1
start". After that, the stop-scripts for the new mode are called, and then the
start-scripts are called. Please note that there is no detection of
commonalities between modes at this point, i.e., if the mode you're coming
from and the mode you're going to both specify that a daemon "X" should be
stopped, then the daemon will be un-stopped (that is, started) while leaving
the previous mode, and then stopped again.


.IP "\fBCONTROL_MOUNT_OPTIONS\fP" 10 
When this option is enabled, laptop mode tools is allowed to control the mount
options for your filesystems. Disabling this will break CONTROL_NOATIME, but it
will most probably also break laptop mode itself, as changes to the mount
options are crucial for achieving spun-down hard drives.


.IP "\fBLM_DIRTY_RATIO\fP" 10 
.IP "\fBNOLM_DIRTY_RATIO\fP" 10 
This option specifies the percentage of system memory that is allowed to
contain unwritten modified data when laptop mode is active. 
 
.IP "\fBLM_DIRTY_BACKGROUND_RATIO\fP" 10 
.IP "\fBNOLM_DIRTY_BACKGROUND_RATIO\fP" 10 
This option specifies the percentage of system memory that is allowed to
contain unwritten modified data after the DIRTY_RATIO barrier has been crossed.
The effect of this option is that when more than DIRTY_RATIO percent of memory
contains modified data, the system will synchronously write back data until
only DIRTY_BACKGROUND_RATIO percent of memory contains modified data. 

.IP "\fBDEF_UPDATE\fP" 10 
.IP "\fBDEF_XFS_AGE_BUFFER\fP" 10 
.IP "\fBDEF_XFS_SYNC_INTERVAL\fP" 10 
.IP "\fBDEF_XFS_BUFD_INTERVAL\fP" 10 
.IP "\fBDEF_MAX_AGE\fP" 10 
These options contain the default (non-laptop-mode) values for some kernel
options that are modified when laptop mode is active. You do not normally need
to change these, they represent the normal kernel defaults. 

.IP "\fBXFS_HZ\fP" 10 
This option specifies the number of units in a second that is utilized by a 2.4
kernel. If you run a 2.4 kernel with an XFS filesystem on non-Intel hardware,
you need to change this option to reflect the kernel "ticks per second" value,
which is the kernel variable HZ. Unfortunately this is not exposed anywhere, so
you'll have to specify it manually.

.IP "\fBLM_SECONDS_BEFORE_SYNC\fP         " 10 
The number of seconds that laptop mode waits after the disk goes idle before it starts 
a full sync. This should always be less than your hard disk idle timeout, because otherwise you'll have a sync
directly after your drive spins down. Two seconds is usually a good value for this option.
 
.IP "\fBXFS_HZ\fP         " 10 
This option expresses the unit of the XFS tuning parameters. The 
default is 100. This option is only useful for 2.4 kernels that have a 
value for HZ that is not 100. In the 2.6 kernel series, the XFS interfaces 
were modified to always use USER_HZ (which is currently always 100), 
so for these kernels you do not need to modify this value. Also, on 2.4 
kernels the value of HZ is 100 for the most common architectures, so 
you need only change this value if you use a less common architecture. 


.SH "SEE ALSO" 
.PP 
laptop_mode(8).
.PP
lm-syslog-setup(8).
.PP
lm-profiler(8).
.PP 
hdparm(8).
.SH "AUTHOR" 
.PP 
This manual page was written by Bart Samwel (bart@samwel.tk).
Permission is granted to copy, distribute and/or modify this document under 
the terms of the GNU General Public License, Version 2 any  
later version published by the Free Software Foundation. 
 
.\" created by instant / docbook-to-man, Tue 09 Nov 2004, 23:14 
